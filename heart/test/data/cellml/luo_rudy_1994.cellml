<?xml version="1.0"?>
<!--  FILE :  LR_II_model_1994.xml

CREATED :  28th March 2002

LAST MODIFIED : 30th July 2003

AUTHOR :  Catherine Lloyd
          The Bioengineering Institute
          The University of Auckland
          
MODEL STATUS :  This model conforms to the CellML 1.0 Specification released on
10th August 2001, and the CellML Metadata 1.0 Specification released on 16th
January, 2002.

DESCRIPTION :  This file contains a CellML description of the mammalian
ventricular action potential based on the Luo-Rudy II model, 1994.  This model
is a development of the LR-I model.  In particular, the LR-II model describes
the processes which regulate [Ca]i (intracellular Calcium concentration), and
the movement of calcium ions through the cell and to and from the sarcoplasmic
reticulum. 

CHANGES: 
  18/07/2002 - CML - Added more metadata.
  09/04/2003 - AAC - Added publication date information.  
  05/06/2003 - CML - Fixed MathML in a few components.
  30/07/2003 - CML - Fixed MathML in a few components.
-->

<model xmlns="http://www.cellml.org/cellml/1.0#"   
  xmlns:cellml="http://www.cellml.org/cellml/1.0#"   
  xmlns:cmeta="http://www.cellml.org/metadata/1.0#"
  xmlns:bqs="http://www.cellml.org/bqs/1.0#" 
  xmlns:ns7="http://www.cellml.org/metadata/simulation/1.0#" 
  cmeta:id="luo_rudy_1994" name="luo_rudy_1994">
  
<documentation xmlns="http://cellml.org/tmp-documentation">
<article>
  <articleinfo>
  <title>A dynamic model of the cardiac ventricular action potential. I. Simulations of ionic currents and concentration changes</title>
  <author>
    <firstname>Catherine</firstname>
          <surname>Lloyd</surname>
      <affiliation>
      <shortaffil>Auckland Bioengineering Institute, The University of Auckland</shortaffil>
    </affiliation>
  </author>
</articleinfo>
  <section id="sec_status">
    <title>Model Status</title>
    <para>
        This CellML model has been written to be compatible with CMISS. Alone it cannot be run and a new version will have to be created.
          </para>
  </section>
  <sect1 id="sec_structure">
<title>Model Structure</title>

<para>
ABSTRACT: A mathematical model of the cardiac ventricular action potential is presented. In our previous work, the membrane Na+ current and K+ currents were formulated. The present article focuses on processes that regulate intracellular Ca2+ and depend on its concentration. The model presented here for the mammalian ventricular action potential is based mostly on the guinea pig ventricular cell. However, it provides the framework for modeling other types of ventricular cells with appropriate modifications made to account for species differences. The following processes are formulated: Ca2+ current through the L-type channel (ICa), the Na(+)-Ca2+ exchanger, Ca2+ release and uptake by the sarcoplasmic reticulum (SR), buffering of Ca2+ in the SR and in the myoplasm, a Ca2+ pump in the sarcolemma, the Na(+)-K+ pump, and a nonspecific Ca(2+)-activated membrane current. Activation of ICa is an order of magnitude faster than in previous models. Inactivation of ICa depends on both the membrane voltage and [Ca2+]i. SR is divided into two subcompartments, a network SR (NSR) and a junctional SR (JSR). Functionally, Ca2+ enters the NSR and translocates to the JSR following a monoexponential function. Release of Ca2+ occurs at JSR and can be triggered by two different mechanisms, Ca(2+)-induced Ca2+ release and spontaneous release. The model provides the basis for the study of arrhythmogenic activity of the single myocyte including afterdepolarizations and triggered activity. It can simulate cellular responses under different degrees of Ca2+ overload. Such simulations are presented in our accompanying article in this issue of Circulation Research.</para>

<para>
The original paper reference is cited below:
</para>

<para>
A dynamic model of the cardiac ventricular action potential. I. Simulations of ionic currents and concentration changes, Ching-hsing Luo and Yoram Rudy, 1994, <emphasis>Circulation Research</emphasis>, 74, 1071-1097.  <ulink url="http://www.ncbi.nlm.nih.gov/pubmed/7514509">PubMed ID: 7514509</ulink>
</para>

<informalfigure float="0" id="fig_cell_diagram">
<mediaobject>
  <imageobject>
    <objectinfo>
      <title>cell diagram of the LR-II model showing ionic currents, pumps and exchangers within the sarcolemma and the sarcoplasmic reticulum</title>
    </objectinfo>
    <imagedata fileref="luo_1994.png"/>
  </imageobject>
</mediaobject>
<caption>A schematic diagram describing the ionic currents, pumps and exchangers that are captured in the LR-II model.  The intracellular compartment is the sarcoplasmic reticulum (SR), which is divided into the two subcompartments, the network SR (NSR) and the junctional SR (JSR).  Ca<superscript>2+</superscript> buffers are present in both the cytoplasm and the JSR.</caption>
</informalfigure>

</sect1>
</article>
</documentation>
  
 
  <units name="ms">
    <unit prefix="milli" units="second"/>
  </units>
  
  <units name="per_ms">
    <unit exponent="-1" prefix="milli" units="second"/>
  </units>

  <units name="per_mm">
    <unit exponent="-1" prefix="milli" units="metre"/>
  </units>

  <units name="mV">
    <unit prefix="milli" units="volt"/>
  </units>

  <units name="mV_per_ms">
    <unit units="mV"/>
    <unit exponent="-1" units="ms"/>
  </units>

  <units name="per_mV">
    <unit exponent="-1" prefix="milli" units="volt"/>
  </units>
  
  <units name="per_mV_ms">
    <unit exponent="-1" units="mV"/>
    <unit exponent="-1" units="ms"/>
  </units>
  
  <units name="mS_per_mm2">
    <unit prefix="milli" units="siemens"/>
    <unit exponent="-2" prefix="milli" units="metre"/>
  </units>
  
  <units name="uF_per_mm2">
    <unit prefix="micro" units="farad"/>
    <unit exponent="-2" prefix="milli" units="metre"/>
  </units>

  <units name="uA_per_mm2">
    <unit prefix="micro" units="ampere"/>
    <unit exponent="-2" prefix="milli" units="metre"/>
  </units>
  
  <units name="mM_per_ms">
    <unit units="mM"/>
    <unit exponent="-1" units="ms"/>
  </units>
  
  <units name="mM">
    <unit prefix="nano" units="mole"/>
    <unit exponent="-3" prefix="milli" units="metre"/>
  </units>
  
  <units name="gas_constant_units">
    <unit prefix="pico" units="joule"/>
    <unit exponent="-1" prefix="nano" units="mole"/>
    <unit exponent="-1" units="kelvin"/>
  </units>
  
  <units name="faradays_constant_units">
    <unit prefix="nano" units="coulomb"/>
    <unit exponent="-1" prefix="nano" units="mole"/>
  </units>
  
  <units name="mm_per_ms">
    <unit prefix="milli" units="metre"/>
    <unit exponent="-1" units="ms"/>
  </units>
  
  <units name="mm2">
    <unit exponent="2" prefix="milli" units="metre"/>
  </units>
 
  <component cmeta:id="environment" name="environment">
    <variable cmeta:id="environment_time" name="time" public_interface="out" units="ms">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#environment_time">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#time"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
  </component>
  
  <component cmeta:id="membrane" name="membrane">
    <variable cmeta:id="membrane_V" initial_value="-84.624" name="V" public_interface="out" units="mV">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_V">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_voltage"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <variable initial_value="8.3145e3" name="R" public_interface="out" units="gas_constant_units"/>
    <variable initial_value="310.0" name="T" public_interface="out" units="kelvin"/>
    <variable initial_value="96845.0" name="F" public_interface="out" units="faradays_constant_units"/>
    <variable name="dV_dt" public_interface="out" units="mV_per_ms"/>
    
    <variable initial_value="0.01" name="Cm" units="uF_per_mm2" cmeta:id="membrane_capacitance">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_capacitance">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_capacitance"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <variable name="I_st" units="uA_per_mm2" cmeta:id="membrane_stimulus_current">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_stimulus_current">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_stimulus_current"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="i_Na" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Ca_L" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_K" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_NaCa" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_K1" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Kp" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_p_Ca" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Na_b" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Ca_b" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_NaK" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_ns_Ca" public_interface="in" units="uA_per_mm2"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="dV_dt_eq">
        <eq/>
        <ci>dV_dt</ci>
        <apply>
          <divide/>
          <apply>
            <minus/>
            <ci> I_st </ci>
            <apply>
              <plus/>
              <ci> i_Na </ci>
              <ci> i_Ca_L </ci>
              <ci> i_K </ci>
              <ci> i_K1 </ci>
              <ci> i_Kp </ci>
              <ci> i_NaCa </ci>
              <ci> i_p_Ca </ci>
              <ci> i_Na_b </ci>
              <ci> i_Ca_b </ci>
              <ci> i_NaK </ci>
              <ci> i_ns_Ca </ci>
            </apply>
          </apply>
          <ci> Cm </ci>
        </apply>
      </apply>
    </math>
     
    <variable initial_value="1e3" name="stimPeriod" units="ms" cmeta:id="membrane_stimulus_current_period">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_stimulus_current_period">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_stimulus_current_period"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <variable initial_value="0.5" name="stimDuration" units="ms" cmeta:id="membrane_stimulus_current_duration">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_stimulus_current_duration">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_stimulus_current_duration"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <variable initial_value="0.5" name="stimCurrent" units="uA_per_mm2" cmeta:id="membrane_stimulus_current_amplitude">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_stimulus_current_amplitude">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_stimulus_current_amplitude"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <math xmlns="http://www.w3.org/1998/Math/MathML" id="Istim_calculation">
      <apply><eq/>
        <ci>I_st</ci>
        <piecewise>
          <piece>
            <ci>stimCurrent</ci>
            <apply><lt/>
              <apply><rem/>
                <ci>time</ci>
                <ci>stimPeriod</ci>
              </apply>
              <ci>stimDuration</ci>
            </apply>
          </piece>
          <otherwise>
            <cn cellml:units="uA_per_mm2">0.0</cn>
          </otherwise>
        </piecewise>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="membrane_voltage_diff_eq">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> V </ci>
        </apply>
        <ci>dV_dt</ci>
      </apply>
    </math>
    
  </component>
  
  <component cmeta:id="fast_sodium_current" name="fast_sodium_current">
    <variable name="i_Na" public_interface="out" units="uA_per_mm2" cmeta:id="membrane_fast_sodium_current">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_fast_sodium_current">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_fast_sodium_current"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <variable name="E_Na" public_interface="out" units="mV"/>
    
    <variable initial_value="0.16" name="g_Na" units="mS_per_mm2" cmeta:id="membrane_fast_sodium_current_conductance">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_fast_sodium_current_conductance">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_fast_sodium_current_conductance"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    
    <variable name="time" private_interface="out" public_interface="in" units="ms"/>
    <variable name="V" private_interface="out" public_interface="in" units="mV"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="Nai" public_interface="in" units="mM"/>
    <variable name="Nao" public_interface="in" units="mM"/>
   
    <variable name="m" private_interface="in" units="dimensionless"/>
    <variable name="h" private_interface="in" units="dimensionless"/>
    <variable name="j" private_interface="in" units="dimensionless"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_Na_calculation">
        <eq/>
        <ci> i_Na </ci>
        <apply>
          <times/>
          <ci> g_Na </ci>
          <apply>
            <power/>
            <ci> m </ci>
            <cn cellml:units="dimensionless"> 3.0 </cn>
          </apply>
          <ci> h </ci>
          <ci> j </ci>
          <apply>
            <minus/>
            <ci> V </ci>
            <ci> E_Na </ci>
          </apply>
        </apply>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="E_Na_calculation">
        <eq/>
        <ci> E_Na </ci>
        <apply>
          <times/>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
            <ci> F </ci>
          </apply>
          <apply>
            <ln/>                
            <apply>
              <divide/>
              <ci> Nao </ci>
              <ci> Nai </ci>
            </apply>
          </apply>
        </apply>
      </apply> 
    </math>
  </component>
  
  <component cmeta:id="fast_sodium_current_m_gate" name="fast_sodium_current_m_gate">
    <variable initial_value="0.0" name="m" public_interface="out" units="dimensionless"/>
        
    <variable name="alpha_m" units="per_ms"/>
    <variable name="beta_m" units="per_ms"/>

    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
   
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_m_calculation">
        <eq/>
        <ci> alpha_m </ci>
        <apply>
          <divide/>
          <apply>
            <times/>
            <cn cellml:units="per_mV_ms"> 0.32 </cn>
            <apply>
              <plus/>
              <ci> V </ci>
              <cn cellml:units="mV"> 47.13 </cn>
            </apply>
          </apply>
          <apply>
            <minus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <times/>
                <cn cellml:units="per_mV"> -0.1 </cn>
                <apply>
                  <plus/>
                  <ci> V </ci>
                  <cn cellml:units="mV"> 47.13 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_m_calculation">
        <eq/>
        <ci> beta_m </ci>
        <apply>
          <times/>
          <cn cellml:units="per_ms"> 0.08 </cn>
          <apply>
            <exp/>
            <apply>
              <divide/>
              <apply>
                <minus/>
                <ci> V </ci>
              </apply>
              <cn cellml:units="mV"> 11.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="dm_dt">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> m </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <times/>
            <ci> alpha_m </ci>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <ci> m </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> beta_m </ci>
            <ci> m </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="fast_sodium_current_h_gate" name="fast_sodium_current_h_gate">
    <variable initial_value="1.0" name="h" public_interface="out" units="dimensionless"/>
        
    <variable name="alpha_h" units="per_ms"/>
    <variable name="beta_h" units="per_ms"/>

    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_h_calculation">
        <eq/>
        <ci> alpha_h </ci>
        <piecewise>
          <piece>
            <apply>
              <times/>
              <cn cellml:units="per_ms"> 0.135 </cn>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <plus/>
                    <cn cellml:units="mV"> 80.0 </cn>
                    <ci> V </ci>
                  </apply>
                  <cn cellml:units="mV"> -6.8 </cn>
                </apply>
              </apply>
            </apply>
            <apply>
              <lt/>
              <ci> V </ci> 
              <cn cellml:units="mV"> -40.0 </cn>
            </apply>
          </piece>
          <otherwise>
            <cn cellml:units="per_ms"> 0.0 </cn>
          </otherwise>
        </piecewise>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_h_calculation">
        <eq/>
        <ci> beta_h </ci>
        <piecewise>
          <piece>
            <apply>
              <plus/>
              <apply>
                <times/>
                <cn cellml:units="per_ms"> 3.56 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="mV"> 0.079 </cn>
                    <ci> V </ci>
                  </apply>
                </apply>
              </apply>
              <apply>
                <times/>
                <cn cellml:units="per_ms"> 310000.0 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="per_mV"> 0.35 </cn>
                    <ci> V </ci>
                  </apply>
                </apply>
              </apply>
            </apply>
            <apply>
              <lt/>
              <ci> V </ci>
              <cn cellml:units="mV"> -40.0 </cn>
            </apply>
          </piece>
          <otherwise>
            <apply>
              <divide/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <times/>
                <cn cellml:units="ms"> 0.13 </cn>
                <apply>
                  <plus/>
                  <cn cellml:units="dimensionless"> 1.0 </cn>
                  <apply>
                    <exp/>
                    <apply>
                      <divide/>
                      <apply>
                        <plus/>
                        <ci> V </ci>
                        <cn cellml:units="mV"> 10.66 </cn>
                      </apply>
                      <cn cellml:units="mV"> -11.1 </cn>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>
          </otherwise>
        </piecewise>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="dh_dt">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> h </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <times/>
            <ci> alpha_h </ci>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <ci> h </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> beta_h </ci>
            <ci> h </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="fast_sodium_current_j_gate" name="fast_sodium_current_j_gate">
    <variable initial_value="1.0" name="j" public_interface="out" units="dimensionless"/>
        
    <variable name="alpha_j" units="per_ms"/>
    <variable name="beta_j" units="per_ms"/>
    
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_j_calculation">
        <eq/>
        <ci> alpha_j </ci>
        <piecewise>
          <piece>
            <apply>
              <times/>
              <apply>
                <minus/>
                <apply>
                  <times/>
                  <cn cellml:units="per_mV_ms"> -127140.0 </cn>
                  <apply>
                    <exp/>
                    <apply>
                      <times/> 
                      <cn cellml:units="per_mV"> 0.2444 </cn>
                      <ci> V </ci>
                    </apply>
                  </apply>
                </apply>
                <apply>
                  <times/>
                  <cn cellml:units="per_mV_ms"> 0.00003474 </cn>
                  <apply>
                    <exp/>
                    <apply>
                      <times/>
                      <cn cellml:units="per_mV"> -0.04391 </cn>
                      <ci> V </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <divide/>
                <apply>
                  <plus/>
                  <ci> V </ci>
                  <cn cellml:units="mV"> 37.78 </cn>
                </apply>
                <apply>
                  <plus/>
                  <cn cellml:units="dimensionless"> 1.0 </cn>
                  <apply>
                    <exp/>
                    <apply>
                      <times/>
                      <cn cellml:units="per_mV"> 0.311 </cn>
                      <apply>
                        <plus/>
                        <ci> V </ci>
                        <cn cellml:units="mV"> 79.23 </cn>
                      </apply>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>
            <apply>
              <lt/>
              <ci> V </ci>
              <cn cellml:units="mV"> -40.0 </cn>
            </apply>
          </piece>
          <otherwise>
            <cn cellml:units="per_ms"> 0.0 </cn>
          </otherwise>
        </piecewise>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_j_calculation">
        <eq/>
        <ci> beta_j </ci>
        <piecewise>
          <piece>
            <apply>
              <divide/>
              <apply>
                <times/>
                <cn cellml:units="per_ms"> 0.1212 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="per_mV"> -0.01052 </cn>
                    <ci> V </ci>
                  </apply>
                </apply>
              </apply>
              <apply>
                <plus/>
                <cn cellml:units="dimensionless"> 1.0 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="per_mV"> -0.1378 </cn>
                    <apply>
                      <plus/>       
                      <ci> V </ci>
                      <cn cellml:units="mV"> 40.14 </cn>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>
            <apply>
              <lt/>
              <ci> V </ci>
              <cn cellml:units="mV"> -40.0 </cn>
            </apply>
          </piece>
          <otherwise>
            <apply>
              <divide/>
              <apply>
                <times/>
                <cn cellml:units="per_ms"> 0.3 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="per_mV"> -0.0000002535 </cn>
                    <ci> V </ci>                                                
                  </apply>
                </apply>
              </apply>
              <apply>
                <plus/>
                <cn cellml:units="dimensionless"> 1.0 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="per_mV"> -0.1 </cn>
                    <apply>
                      <plus/>
                      <ci> V </ci>
                      <cn cellml:units="mV"> 32.0 </cn>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>                                                            
          </otherwise> 
        </piecewise>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="dj_dt">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> j </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <times/>
            <ci> alpha_j </ci>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <ci> j </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> beta_j </ci>
            <ci> j </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="L_type_Ca_channel" name="L_type_Ca_channel">
    <variable name="i_Ca_L" public_interface="out" units="uA_per_mm2"/>
    <variable name="i_CaCa" public_interface="out" units="uA_per_mm2"/>
    <variable name="i_CaK" public_interface="out" units="uA_per_mm2"/>
    <variable name="i_CaNa" public_interface="out" units="uA_per_mm2"/>
    <variable initial_value="0.75" name="gamma_Nai" public_interface="out" units="dimensionless"/>
    <variable initial_value="0.75" name="gamma_Nao" public_interface="out" units="dimensionless"/>
    <variable initial_value="0.75" name="gamma_Ki" public_interface="out" units="dimensionless"/>
    <variable initial_value="0.75" name="gamma_Ko" public_interface="out" units="dimensionless"/>
    
    <variable name="I_CaCa" units="uA_per_mm2"/>
    <variable name="I_CaK" units="uA_per_mm2"/>
    <variable name="I_CaNa" units="uA_per_mm2"/>
    <variable initial_value="5.4e-6" name="P_Ca" units="mm_per_ms"/>
    <variable initial_value="6.75e-9" name="P_Na" units="mm_per_ms"/>
    <variable initial_value="1.93e-9" name="P_K" units="mm_per_ms"/>
    <variable initial_value="1.0" name="gamma_Cai" units="dimensionless"/>
    <variable initial_value="0.34" name="gamma_Cao" units="dimensionless"/>
   
    <variable name="time" private_interface="out" public_interface="in" units="ms"/>
    <variable name="V" private_interface="out" public_interface="in" units="mV"/>
    <variable name="Cai" private_interface="out" public_interface="in" units="mM"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="Cao" public_interface="in" units="mM"/>
    <variable name="Nao" public_interface="in" units="mM"/>
    <variable name="Ko" public_interface="in" units="mM"/>
    <variable name="Nai" public_interface="in" units="mM"/>
    <variable name="Ki" public_interface="in" units="mM"/>
    
    <variable name="d" private_interface="in" units="dimensionless"/>
    <variable name="f" private_interface="in" units="dimensionless"/>
    <variable name="f_Ca" private_interface="in" units="dimensionless"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_CaCa_calculation">
        <eq/>
        <ci> i_CaCa </ci>
        <apply>
          <times/>
          <ci> d </ci>
          <ci> f </ci>
          <ci> f_Ca </ci>
          <ci> I_CaCa </ci>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_CaNa_calculation">
        <eq/>
        <ci> i_CaNa </ci>
        <apply>
          <times/>
          <ci> d </ci>
          <ci> f </ci>
          <ci> f_Ca </ci>
          <ci> I_CaNa </ci>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_CaK_calculation">
        <eq/>
        <ci> i_CaK </ci>
        <apply>
          <times/>
          <ci> d </ci>
          <ci> f </ci>
          <ci> f_Ca </ci>
          <ci> I_CaK </ci>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="I_CaCa_calculation">
        <eq/>
        <ci> I_CaCa </ci>
        <apply>
          <times/>
          <ci> P_Ca </ci>
          <apply>
            <power/>
            <cn cellml:units="dimensionless"> 2.0 </cn>
            <cn cellml:units="dimensionless"> 2.0 </cn>
          </apply>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> V </ci>
              <apply>
                <power/>
                <ci> F </ci>
                <cn cellml:units="dimensionless"> 2.0 </cn>
              </apply>
            </apply>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
          </apply>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <apply>
                <times/>
                <ci> gamma_Cai </ci>
                <ci> Cai </ci>
                <apply>
                  <exp/>
                  <apply>
                    <divide/>
                    <apply>
                      <times/>
                      <cn cellml:units="dimensionless"> 2.0 </cn>
                      <ci> V </ci>
                      <ci> F </ci>
                    </apply>
                    <apply>
                      <times/>
                      <ci> R </ci> 
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <times/>
                <ci> gamma_Cao </ci>
                <ci> Cao </ci>
              </apply>
            </apply>
            <apply>
              <minus/>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <times/>
                    <cn cellml:units="dimensionless"> 2.0 </cn>
                    <ci> V </ci>
                    <ci> F </ci>
                  </apply>
                  <apply>
                    <times/>
                    <ci> R </ci>
                    <ci> T </ci>
                  </apply>
                </apply>
              </apply>
              <cn cellml:units="dimensionless"> 1.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="I_CaNa_calculation">
        <eq/>
        <ci> I_CaNa </ci>
        <apply>
          <times/>
          <ci> P_Na </ci>
          <apply>
            <power/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <cn cellml:units="dimensionless"> 2.0 </cn>
          </apply>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> V </ci>
              <apply>
                <power/>
                <ci> F </ci>
                <cn cellml:units="dimensionless"> 2.0 </cn>
              </apply>
            </apply>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
          </apply>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <apply>
                <times/>
                <ci> gamma_Nai </ci>
                <ci> Nai </ci>
                <apply>
                  <exp/>
                  <apply>
                    <divide/>
                    <apply>
                      <times/>
                      <cn cellml:units="dimensionless"> 1.0 </cn>
                      <ci> V </ci>
                      <ci> F </ci>
                    </apply>
                    <apply>
                      <times/>
                      <ci> R </ci> 
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <times/>
                <ci> gamma_Nao </ci>
                <ci> Nao </ci>
              </apply>
            </apply>
            <apply>
              <minus/>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <times/>
                    <cn cellml:units="dimensionless"> 1.0 </cn>
                    <ci> V </ci>
                    <ci> F </ci>
                  </apply>
                  <apply>
                    <times/>
                    <ci> R </ci>
                    <ci> T </ci>
                  </apply>
                </apply>
              </apply>
              <cn cellml:units="dimensionless"> 1.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="I_CaK_calculation">
        <eq/>
        <ci> I_CaK </ci>
        <apply>
          <times/>
          <ci> P_K </ci>
          <apply>
            <power/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <cn cellml:units="dimensionless"> 2.0 </cn>
          </apply>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> V </ci>
              <apply>
                <power/>
                <ci> F </ci>
                <cn cellml:units="dimensionless"> 2.0 </cn>
              </apply>
            </apply>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
          </apply>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <apply>
                <times/>
                <ci> gamma_Ki </ci>
                <ci> Ki </ci>
                <apply>
                  <exp/>
                  <apply>
                    <divide/>
                    <apply>
                      <times/>
                      <cn cellml:units="dimensionless"> 1.0 </cn>
                      <ci> V </ci>
                      <ci> F </ci>
                    </apply>
                    <apply>
                      <times/>
                      <ci> R </ci> 
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <times/>
                <ci> gamma_Ko </ci>
                <ci> Ko </ci>
              </apply>
            </apply>
            <apply>
              <minus/>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <times/>
                    <cn cellml:units="dimensionless"> 1.0 </cn>
                    <ci> V </ci>
                    <ci> F </ci>
                  </apply>
                  <apply>
                    <times/>
                    <ci> R </ci>
                    <ci> T </ci>
                  </apply>
                </apply>
              </apply>
              <cn cellml:units="dimensionless"> 1.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_Ca_L_calculation">
        <eq/>
        <ci> i_Ca_L </ci>
        <apply> <plus/>
          <ci> i_CaCa </ci>
          <ci> i_CaK </ci>
          <ci> i_CaNa </ci>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="L_type_Ca_channel_d_gate" name="L_type_Ca_channel_d_gate">
    <variable initial_value="0.0" name="d" public_interface="out" units="dimensionless"/> 

    <variable name="alpha_d" units="per_ms"/>
    <variable name="beta_d" units="per_ms"/>
    <variable name="d_infinity" units="dimensionless"/>
    <variable name="tau_d" units="ms"/>
    
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_d_calculation">
        <eq/>
        <ci> alpha_d </ci>
        <apply>
          <divide/>
          <ci> d_infinity </ci>
          <ci> tau_d </ci>
        </apply>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="d_infinity_calculation">
        <eq/>
        <ci> d_infinity </ci>
        <apply>
          <divide/>
          <cn cellml:units="dimensionless"> 1.0 </cn>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <minus/>
                <apply>
                  <divide/>
                  <apply>
                    <plus/>
                    <ci> V </ci>
                    <cn cellml:units="mV"> 10.0 </cn>
                  </apply>
                  <cn cellml:units="mV"> 6.24 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="tau_d_calculation">
        <eq/>
        <ci> tau_d </ci>
        <apply>
          <times/>
          <ci> d_infinity </ci>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <exp/>
                <apply>
                  <minus/>
                  <apply>
                    <divide/>
                    <apply>
                      <plus/>
                      <ci> V </ci>
                      <cn cellml:units="mV"> 10.0 </cn>
                    </apply>
                    <cn cellml:units="mV"> 6.24 </cn>
                  </apply>
                </apply>
              </apply>
            </apply>
            <apply>
              <times/>
              <cn cellml:units="per_mV_ms"> 0.035 </cn>
              <apply>
                <plus/>
                <ci> V </ci>
                <cn cellml:units="mV"> 10.0 </cn>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_d_calculation">
        <eq/>
        <ci> beta_d </ci>
        <apply>
          <divide/>
          <apply>
            <minus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <ci> d_infinity </ci>
          </apply>
          <ci> tau_d </ci>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="dd_dt">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> d </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <times/>
            <ci> alpha_d </ci>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <ci> d </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> beta_d </ci>
            <ci> d </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="L_type_Ca_channel_f_gate" name="L_type_Ca_channel_f_gate">
    <variable initial_value="1.0" name="f" public_interface="out" units="dimensionless"/> 

    <variable name="alpha_f" units="per_ms"/>
    <variable name="beta_f" units="per_ms"/>
    <variable name="f_infinity" units="dimensionless"/>
    <variable name="tau_f" units="ms"/>
    
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
   
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_f_calculation">
        <eq/>
        <ci> alpha_f </ci>
        <apply>
          <divide/>
          <ci> f_infinity </ci>
          <ci> tau_f </ci>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="f_infinity_calculation">
        <eq/>
        <ci> f_infinity </ci>
        <apply>
          <plus/>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <plus/>
                    <ci> V </ci>
                    <cn cellml:units="mV"> 35.06 </cn>
                  </apply>
                  <cn cellml:units="mV"> 8.6 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 0.6 </cn>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <minus/>
                    <cn cellml:units="mV"> 50.0 </cn>
                    <ci> V </ci>
                  </apply>
                  <cn cellml:units="mV"> 20.0 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="tau_f_calculation">
        <eq/>
        <ci> tau_f </ci>
        <apply>
          <divide/>
          <cn cellml:units="ms"> 1.0 </cn>
          <apply>
            <plus/>
            <apply>
              <times/>
              <cn cellml:units="dimensionless"> 0.0197 </cn>
              <apply>
                <exp/>
                <apply>
                  <minus/>
                  <apply>
                    <power/>
                    <apply>
                      <times/>
                      <cn cellml:units="per_mV"> 0.0337 </cn>
                      <apply>
                        <plus/>
                        <ci> V </ci>
                        <cn cellml:units="mV"> 10.0 </cn>
                      </apply>
                    </apply>
                    <cn cellml:units="dimensionless"> 2.0 </cn>
                  </apply>
                </apply>
              </apply>
            </apply>
            <cn cellml:units="dimensionless"> 0.02 </cn>
          </apply>
        </apply>
      </apply>
    </math>
    
	<math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_f_calculation">
        <eq/>
        <ci> beta_f </ci>
        <apply>
          <divide/>
          <apply>
            <minus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <ci> f_infinity </ci>
          </apply>
          <ci> tau_f </ci>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="df_dt">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> f </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <times/>
            <ci> alpha_f </ci>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <ci> f </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> beta_f </ci>
            <ci> f </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="L_type_Ca_channel_f_Ca_gate" name="L_type_Ca_channel_f_Ca_gate">
    <variable name="f_Ca" public_interface="out" units="dimensionless"/> 

    <variable initial_value="0.6e-3" name="Km_Ca" units="mM"/>
    
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="Cai" public_interface="in" units="mM"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="f_Ca_calculation">
        <eq/>
        <ci> f_Ca </ci>
        <apply>
          <divide/>
          <cn cellml:units="dimensionless"> 1.0 </cn>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <power/>
              <apply>
                <divide/>
                <ci> Cai </ci>
                <ci> Km_Ca </ci>
              </apply>
              <cn cellml:units="dimensionless"> 2.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="time_dependent_potassium_current" name="time_dependent_potassium_current">
    <variable name="i_K" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="2.82e-3" name="g_K_max" units="mS_per_mm2"/>
    <variable name="g_K" units="mS_per_mm2"/>
    <variable name="E_K" units="mV"/>
    <variable initial_value="0.01833" name="PR_NaK" units="dimensionless"/>
    
    <variable name="time" private_interface="out" public_interface="in" units="ms"/>
    <variable name="V" private_interface="out" public_interface="in" units="mV"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="Ko" public_interface="in" units="mM"/>
    <variable name="Ki" public_interface="in" units="mM"/>
    <variable name="Nao" public_interface="in" units="mM"/>
    <variable name="Nai" public_interface="in" units="mM"/>
    
    <variable name="X" private_interface="in" units="dimensionless"/>
    <variable name="Xi" private_interface="in" units="dimensionless"/>
   
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="g_K_calculation">
        <eq/>
        <ci> g_K </ci>
        <apply>
          <times/>
          <ci>g_K_max</ci>
          <apply>
            <root/>
            <apply>
              <divide/>
              <ci> Ko </ci>
              <cn cellml:units="mM"> 5.4 </cn>
            </apply>
          </apply>                                                              
        </apply>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="E_K_calculation">
        <eq/>
        <ci> E_K </ci>
        <apply>
          <times/>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
            <ci> F </ci>
          </apply>
          <apply>
            <ln/>
            <apply>
              <divide/>
              <apply>
                <plus/>
                <ci> Ko </ci>
                <apply>
                  <times/>
                  <ci> PR_NaK </ci>
                  <ci> Nao </ci>
                </apply>
              </apply>
              <apply>
                <plus/>
                <ci> Ki </ci>
                <apply>
                  <times/>
                  <ci> PR_NaK </ci>
                  <ci> Nai </ci>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_K_calculation">
        <eq/>
        <ci> i_K </ci>
        <apply>
          <times/>
          <ci> g_K </ci>
          <apply>
            <power/>
            <ci> X </ci>
            <cn cellml:units="dimensionless"> 2.0 </cn>
          </apply>
          <ci> Xi </ci>
          <apply>
            <minus/>
            <ci> V </ci>
            <ci> E_K </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="time_dependent_potassium_current_X_gate" name="time_dependent_potassium_current_X_gate">
    <variable initial_value="0.0" name="X" public_interface="out" units="dimensionless"/>

    <variable name="alpha_X" units="per_ms"/>
    <variable name="beta_X" units="per_ms"/>
    
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
   
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_X_calculation">
        <eq/>
        <ci> alpha_X </ci>
        <apply>
          <divide/>
          <apply>
            <times/>
            <cn cellml:units="per_mV_ms"> 0.0000719 </cn>
            <apply>
              <plus/>
              <ci> V </ci>
              <cn cellml:units="mV"> 30.0 </cn>
            </apply>
          </apply>
          <apply>
            <minus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <times/>
                <cn cellml:units="dimensionless"> -0.148 </cn>
                <apply>
                  <plus/>
                  <ci> V </ci>
                  <cn cellml:units="mV"> 30.0 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_X_calculation">
        <eq/>
        <ci> beta_X </ci>
        <apply>
          <divide/>
          <apply>
            <times/>
            <cn cellml:units="per_mV_ms"> 0.000131 </cn>
            <apply>
              <plus/>
              <ci> V </ci>
              <cn cellml:units="mV"> 30.0 </cn>
            </apply>
          </apply>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> -1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <times/>
                <cn cellml:units="dimensionless"> 0.0687 </cn>
                <apply>
                  <plus/>
                  <ci> V </ci>
                  <cn cellml:units="mV"> 30.0 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="dX_dt">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> X </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <times/>
            <ci> alpha_X </ci>
            <apply>
              <minus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <ci> X </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> beta_X </ci>
            <ci> X </ci>
          </apply>
        </apply>
      </apply>
    </math>                                                                     
  </component>
  
  <component cmeta:id="time_dependent_potassium_current_Xi_gate" name="time_dependent_potassium_current_Xi_gate">
    <variable name="Xi" public_interface="out" units="dimensionless"/>

    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="Xi_calculation">
        <eq/>
        <ci> Xi </ci>
        <apply>
          <divide/>
          <cn cellml:units="dimensionless"> 1.0 </cn>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <divide/>
                <apply>
                  <minus/>
                  <ci> V </ci>
                  <cn cellml:units="mV"> 56.26 </cn>
                </apply>
                <cn cellml:units="mV"> 32.1 </cn>
              </apply>
            </apply>
          </apply>
        </apply> 
      </apply>
    </math>
  </component>
  
  <component cmeta:id="time_independent_potassium_current" name="time_independent_potassium_current">
    <variable name="i_K1" public_interface="out" units="uA_per_mm2" cmeta:id="membrane_inward_rectifier_potassium_current">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_inward_rectifier_potassium_current">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_inward_rectifier_potassium_current"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>
    <variable name="E_K1" private_interface="out" public_interface="out" units="mV"/>    
    <variable initial_value="7.5e-3" name="g_K1_max" units="mS_per_mm2" cmeta:id="membrane_inward_rectifier_potassium_current_conductance">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
        <rdf:Description rdf:about="#membrane_inward_rectifier_potassium_current_conductance">
          <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#membrane_inward_rectifier_potassium_current_conductance"/>
        </rdf:Description>
      </rdf:RDF>
    </variable>       
    <variable name="g_K1" units="mS_per_mm2"/>
    
    <variable name="time" private_interface="out" public_interface="in" units="ms"/>
    <variable name="V" private_interface="out" public_interface="in" units="mV"/>
    <variable name="Ko" public_interface="in" units="mM"/>
    <variable name="Ki" public_interface="in" units="mM"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/> 
    
    <variable name="K1_infinity" private_interface="in" units="dimensionless"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="g_K1_calculation">
        <eq/>
        <ci> g_K1 </ci>
        <apply>
          <times/>
          <ci>g_K1_max</ci>
          <apply>
            <root/>
            <apply>
              <divide/>
              <ci> Ko </ci>
              <cn cellml:units="mM"> 5.4 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="E_K1_calculation">
        <eq/>
        <ci> E_K1 </ci>
        <apply>
          <times/>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
            <ci> F </ci>
          </apply>
          <apply>
            <ln/>
            <apply>
              <divide/>
              <ci> Ko </ci>
              <ci> Ki </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_K1_calculation">
        <eq/>
        <ci> i_K1 </ci>
        <apply>
          <times/>
          <ci> g_K1 </ci>
          <ci> K1_infinity </ci>
          <apply>
            <minus/>     
            <ci> V </ci>
            <ci> E_K1 </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="time_independent_potassium_current_K1_gate" name="time_independent_potassium_current_K1_gate">
    <variable name="K1_infinity" public_interface="out" units="dimensionless"/> 
    <variable name="alpha_K1" units="per_ms"/>
    <variable name="beta_K1" units="per_ms"/>
    
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="E_K1" public_interface="in" units="mV"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="alpha_K1_calculation">
        <eq/>
        <ci> alpha_K1 </ci>
        <apply>
          <divide/>
          <cn cellml:units="per_ms"> 1.02 </cn>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <times/>
                <cn cellml:units="per_mV"> 0.2385 </cn>
                <apply>
                  <minus/>
                  <apply>
                    <minus/>
                    <ci> V </ci>
                    <ci> E_K1 </ci>
                  </apply>
                  <cn cellml:units="mV"> 59.215 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="beta_K1_calculation">
        <eq/>
        <ci> beta_K1 </ci>
        <apply>
          <divide/>
          <apply>
            <plus/>
            <apply>
              <times/>
              <cn cellml:units="per_ms"> 0.49124 </cn>
              <apply>
                <exp/>
                <apply>
                  <times/>
                  <cn cellml:units="dimensionless"> 0.08032 </cn>
                  <apply>
                    <minus/>
                    <apply>
                      <plus/>
                      <ci> V </ci>
                      <cn cellml:units="mV"> 5.476 </cn>
                    </apply>
                    <ci> E_K1 </ci>
                  </apply>
                </apply>
              </apply>
            </apply>
            <apply>
              <exp/>
              <apply>
                <times/>
                <cn cellml:units="dimensionless"> 0.06175 </cn>
                <apply>
                  <minus/>
                  <ci> V </ci>
                  <apply>
                    <plus/>
                    <ci> E_K1 </ci>
                    <cn cellml:units="mV"> 594.31 </cn>
                  </apply>
                </apply>
              </apply>
            </apply>
          </apply>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <times/>
                <cn cellml:units="per_mV"> -0.5143 </cn>
                <apply>
                  <plus/>
                  <apply>
                    <minus/>
                    <ci> V </ci>
                    <ci> E_K1 </ci>
                  </apply>
                  <cn cellml:units="mV"> 4.753 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="K1_infinity_calculation">
        <eq/>
        <ci> K1_infinity </ci>
        <apply>
          <divide/>
          <ci> alpha_K1 </ci>
          <apply>
            <plus/>
            <ci> alpha_K1 </ci>
            <ci> beta_K1 </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="plateau_potassium_current" name="plateau_potassium_current">
    <variable name="i_Kp" public_interface="out" units="uA_per_mm2"/>
    
    <variable name="E_Kp" units="mV"/>
    <variable initial_value="1.83e-4" name="g_Kp" units="mS_per_mm2"/>
    <variable name="Kp" units="dimensionless"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="E_K1" public_interface="in" units="mV"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="E_Kp_calculation">
        <eq/>
        <ci> E_Kp </ci>
        <ci> E_K1 </ci>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="Kp_calculation">
        <eq/>
        <ci> Kp </ci>
        <apply>
          <divide/>
          <cn cellml:units="dimensionless"> 1.0 </cn>
          <apply>
            <plus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <divide/>
                <apply>
                  <minus/>
                  <cn cellml:units="mV"> 7.488 </cn>
                  <ci> V </ci>
                </apply>
                <cn cellml:units="mV"> 5.98 </cn>
              </apply>
            </apply> 
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_Kp_calculation">
        <eq/>
        <ci> i_Kp </ci>
        <apply>
          <times/>
          <ci> g_Kp </ci>
          <ci> Kp </ci>
          <apply>
            <minus/>
            <ci> V </ci>
            <ci> E_Kp </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="sarcolemmal_calcium_pump" name="sarcolemmal_calcium_pump">
    <variable name="i_p_Ca" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="0.5e-3" name="K_mpCa" units="mM"/>
    <variable initial_value="1.15e-2" name="I_pCa" units="uA_per_mm2"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="Cai" public_interface="in" units="mM"/>   
 
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_p_Ca_calculation">
        <eq/>
        <ci> i_p_Ca </ci>
        <apply>
          <times/>
          <ci> I_pCa </ci>
          <apply>
            <divide/>
            <ci> Cai </ci>
            <apply>
              <plus/>
              <ci> K_mpCa </ci>
              <ci> Cai </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="sodium_background_current" name="sodium_background_current">
    <variable name="i_Na_b" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="1.41e-5" name="g_Nab" units="mS_per_mm2"/>
    <variable name="E_NaN" units="mV"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="E_Na" public_interface="in" units="mV"/> 
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="E_NaN_calculation">
        <eq/>
        <ci> E_NaN </ci>
        <ci> E_Na </ci>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_Na_b_calculation">
        <eq/>
        <ci> i_Na_b </ci>
        <apply>
          <times/>
          <ci> g_Nab </ci>
          <apply>
            <minus/>
            <ci> V </ci>
            <ci> E_NaN </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="calcium_background_current" name="calcium_background_current">
    <variable name="i_Ca_b" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="3.016e-5" name="g_Cab" units="mS_per_mm2"/>
    <variable name="E_CaN" units="mV"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="Cai" public_interface="in" units="mM"/>
    <variable name="Cao" public_interface="in" units="mM"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="E_CaN_calculation">
        <eq/>
        <ci> E_CaN </ci>
        <apply>
          <times/>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
            <apply>
              <times/>
              <cn cellml:units="dimensionless"> 2.0 </cn>
              <ci> F </ci>
            </apply>
          </apply>
          <apply>
            <ln/>
            <apply>
              <divide/>
              <ci> Cao </ci>
              <ci> Cai </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_Ca_b_calculation">
        <eq/>
        <ci> i_Ca_b </ci>
        <apply>
          <times/>
          <ci> g_Cab </ci>
          <apply>
            <minus/>
            <ci> V </ci>
            <ci> E_CaN </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="sodium_potassium_pump" name="sodium_potassium_pump">
    <variable name="i_NaK" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="1.5e-2" name="I_NaK" units="uA_per_mm2"/>
    <variable name="f_NaK" units="dimensionless"/>
    <variable initial_value="10.0" name="K_mNai" units="mM"/>
    <variable initial_value="1.5" name="K_mKo" units="mM"/>
    <variable name="sigma" units="dimensionless"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>  
    <variable name="Nai" public_interface="in" units="mM"/>
    <variable name="Nao" public_interface="in" units="mM"/>   
    <variable name="Ko" public_interface="in" units="mM"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="f_NaK_calculation">
        <eq/>
        <ci> f_NaK </ci>
        <apply>
          <divide/>
          <cn cellml:units="dimensionless"> 1.0 </cn>
          <apply>
            <plus/>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <times/>
                <cn cellml:units="dimensionless"> 0.1245 </cn>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <cn cellml:units="dimensionless"> -0.1 </cn>
                    <apply>
                      <divide/>
                      <apply>
                        <times/>
                        <ci> V </ci>
                        <ci> F </ci>
                      </apply>
                      <apply>
                        <times/>
                        <ci> R </ci>
                        <ci> T </ci>
                      </apply>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>
            <apply>
              <times/>
              <cn cellml:units="dimensionless"> 0.0365 </cn>
              <ci> sigma </ci>
              <apply>
                <exp/>
                <apply>
                  <minus/>
                  <apply>
                    <divide/>
                    <apply>
                      <times/>
                      <ci> V </ci>
                      <ci> F </ci>
                    </apply>
                    <apply>
                      <times/>
                      <ci> R </ci>
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="sigma_calculation">
        <eq/>
        <ci> sigma </ci>
        <apply>
          <times/>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <cn cellml:units="dimensionless"> 7.0 </cn>
          </apply>
          <apply>
            <minus/>
            <apply>
              <exp/>
              <apply>
                <divide/>
                <ci> Nao </ci>
                <cn cellml:units="dimensionless"> 67.3 </cn>
              </apply>
            </apply>
            <cn cellml:units="dimensionless"> 1.0 </cn>
          </apply>
        </apply>
      </apply>
    </math>
 
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_NaK_calculation">
        <eq/>
        <ci> i_NaK </ci>
        <apply>
          <times/>
          <ci> I_NaK </ci>
          <ci> f_NaK </ci>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <power/>
                <apply>
                  <divide/>
                  <ci> K_mNai </ci>
                  <ci> Nai </ci>
                </apply>
                <cn cellml:units="dimensionless"> 1.5 </cn>
              </apply>
            </apply>
          </apply>
          <apply>
            <divide/>
            <ci> Ko </ci>
            <apply>
              <plus/>
              <ci> Ko </ci>
              <ci> K_mKo </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="non_specific_calcium_activated_current" name="non_specific_calcium_activated_current">
    <variable name="i_ns_Ca" public_interface="out" units="uA_per_mm2"/>
    <variable name="i_ns_Na" public_interface="out" units="uA_per_mm2"/>
    <variable name="i_ns_K" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="1.75e-9" name="P_ns_Ca" units="mm_per_ms"/>
   
    <variable name="gamma_Nai" public_interface="in" units="dimensionless"/>
    <variable name="gamma_Nao" public_interface="in" units="dimensionless"/>
    <variable name="gamma_Ki" public_interface="in" units="dimensionless"/>
    <variable name="gamma_Ko" public_interface="in" units="dimensionless"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="Cao" public_interface="in" units="mM"/>
    <variable name="Nao" public_interface="in" units="mM"/>
    <variable name="Ko" public_interface="in" units="mM"/>
    <variable name="Nai" public_interface="in" units="mM"/>
    <variable name="Ki" public_interface="in" units="mM"/>
    <variable name="I_ns_Na" units="uA_per_mm2"/>
    <variable name="I_ns_K" units="uA_per_mm2"/>
    <variable initial_value="1.2e-3" name="K_m_ns_Ca" units="mM"/>
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="Cai" public_interface="in" units="mM"/>
    <variable name="V" public_interface="in" units="mV"/>

    <variable name="Vns" units="mV"/>
    <variable name="EnsCa" units="mV"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="EnsCa_calculation">
        <eq/>
        <ci> EnsCa </ci>
        <apply>
          <times/>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
            <ci> F </ci>
          </apply>
          <apply>
            <ln/>
            <apply>
              <divide/>
              <apply>
                <plus/>
                <ci>Ko</ci>
                <ci>Nao</ci>
              </apply>
              <apply>
                <plus/>
                <ci>Ki</ci>
                <ci>Nai</ci>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="Vns_calculation">
        <eq/>
        <ci>Vns</ci>
        <apply>
          <minus/>
          <ci>V</ci>
          <ci>EnsCa</ci>
        </apply>
      </apply>
    </math>
 
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_ns_Na_calculation">
        <eq/>
        <ci> i_ns_Na </ci>
        <apply>
          <times/>
          <ci> I_ns_Na </ci>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <power/>
                <apply>
                  <divide/>
                  <ci> K_m_ns_Ca </ci>
                  <ci> Cai </ci>
                </apply>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
 
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_ns_K_calculation">
        <eq/>
        <ci> i_ns_K </ci>
        <apply>
          <times/>
          <ci> I_ns_K </ci>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <power/>
                <apply>
                  <divide/>
                  <ci> K_m_ns_Ca </ci>
                  <ci> Cai </ci>
                </apply>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_ns_Ca_calculation">
        <eq/>
        <ci> i_ns_Ca </ci>
        <apply>
          <plus/>
          <ci> i_ns_Na </ci>
          <ci> i_ns_K </ci>
        </apply>
      </apply>
    </math>
    
	<math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="I_ns_Na_calculation">
        <eq/>
        <ci> I_ns_Na </ci>
        <apply>
          <times/>
          <ci> P_ns_Ca </ci>
          <apply>
            <power/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <cn cellml:units="dimensionless"> 2.0 </cn>
          </apply>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> Vns </ci>
              <apply>
                <power/>
                <ci> F </ci>
                <cn cellml:units="dimensionless"> 2.0 </cn>
              </apply>
            </apply>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
          </apply>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <apply>
                <times/>
                <ci> gamma_Nai </ci>
                <ci> Nai </ci>
                <apply>
                  <exp/>
                  <apply>
                    <divide/>
                    <apply>
                      <times/>
                      <cn cellml:units="dimensionless"> 1.0 </cn>
                      <ci> Vns </ci>
                      <ci> F </ci>
                    </apply>
                    <apply>
                      <times/>
                      <ci> R </ci> 
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <times/>
                <ci> gamma_Nao </ci>
                <ci> Nao </ci>
              </apply>
            </apply>
            <apply>
              <minus/>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <times/>
                    <cn cellml:units="dimensionless"> 1.0 </cn>
                    <ci> Vns </ci>
                    <ci> F </ci>
                  </apply>
                  <apply>
                    <times/>
                    <ci> R </ci>
                    <ci> T </ci>
                  </apply>
                </apply>
              </apply>
              <cn cellml:units="dimensionless"> 1.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>

    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="I_ns_K_calculation">
        <eq/>
        <ci> I_ns_K </ci>
        <apply>
          <times/>
          <ci> P_ns_Ca </ci>
          <apply>
            <power/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <cn cellml:units="dimensionless"> 2.0 </cn>
          </apply>
          <apply>
            <divide/>
            <apply>
              <times/>
              <ci> Vns </ci>
              <apply>
                <power/>
                <ci> F </ci>
                <cn cellml:units="dimensionless"> 2.0 </cn>
              </apply>
            </apply>
            <apply>
              <times/>
              <ci> R </ci>
              <ci> T </ci>
            </apply>
          </apply>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <apply>
                <times/>
                <ci> gamma_Ki </ci>
                <ci> Ki </ci>
                <apply>
                  <exp/>
                  <apply>
                    <divide/>
                    <apply>
                      <times/>
                      <cn cellml:units="dimensionless"> 1.0 </cn>
                      <ci> Vns </ci>
                      <ci> F </ci>
                    </apply>
                    <apply>
                      <times/>
                      <ci> R </ci> 
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <times/>
                <ci> gamma_Ko </ci>
                <ci> Ko </ci>
              </apply>
            </apply>
            <apply>
              <minus/>
              <apply>
                <exp/>
                <apply>
                  <divide/>
                  <apply>
                    <times/>
                    <cn cellml:units="dimensionless"> 1.0 </cn>
                    <ci> Vns </ci>
                    <ci> F </ci>
                  </apply>
                  <apply>
                    <times/>
                    <ci> R </ci>
                    <ci> T </ci>
                  </apply>
                </apply>
              </apply>
              <cn cellml:units="dimensionless"> 1.0 </cn>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="Na_Ca_exchanger" name="Na_Ca_exchanger">
    <variable name="i_NaCa" public_interface="out" units="uA_per_mm2"/>
    
    <variable initial_value="20.0" name="K_NaCa" units="uA_per_mm2"/>
    <variable initial_value="87.5" name="K_mNa" units="mM"/>
    <variable initial_value="1.38" name="K_mCa" units="mM"/>
    <variable initial_value="0.1" name="K_sat" units="dimensionless"/>
    <variable initial_value="0.35" name="eta" units="dimensionless"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="V" public_interface="in" units="mV"/>
    <variable name="R" public_interface="in" units="gas_constant_units"/>
    <variable name="T" public_interface="in" units="kelvin"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="Nai" public_interface="in" units="mM"/>
    <variable name="Nao" public_interface="in" units="mM"/>
    <variable name="Cai" public_interface="in" units="mM"/>
    <variable name="Cao" public_interface="in" units="mM"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply>
        <eq/>
        <ci> i_NaCa </ci>
        <apply>
          <times/> 
          <ci> K_NaCa </ci>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <apply>
                <power/>
                <ci> K_mNa </ci>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
              <apply>
                <power/>
                <ci> Nao </ci>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
            </apply>
          </apply>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <ci> K_mCa </ci>
              <ci> Cao </ci>
            </apply>
          </apply>
          <apply>
            <divide/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <plus/>
              <cn cellml:units="dimensionless"> 1.0 </cn>
              <apply>
                <times/>
                <ci> K_sat </ci>
                <apply>
                  <exp/>
                  <apply>
                    <times/>
                    <apply>
                      <minus/>
                      <ci> eta </ci>
                      <cn cellml:units="dimensionless"> 1.0 </cn>
                    </apply>
                    <ci> V </ci>
                    <apply>
                      <divide/>
                      <ci> F </ci>
                      <apply>
                        <times/>
                        <ci> R </ci>
                        <ci> T </ci>
                      </apply>
                    </apply>
                  </apply>
                </apply>
              </apply>
            </apply>
          </apply>
          <apply>
            <minus/>
            <apply>
              <times/>
              <apply>
                <exp/>
                <apply>
                  <times/>
                  <ci> eta </ci>
                  <ci> V </ci>
                  <apply>
                    <divide/>
                    <ci> F </ci>
                    <apply>
                      <times/>
                      <ci> R </ci>
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <power/>
                <ci> Nai </ci>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
              <ci> Cao </ci>
            </apply>
            <apply>
              <times/>
              <apply>
                <exp/>
                <apply>
                  <times/>
                  <apply>
                    <minus/>
                    <ci> eta </ci>
                    <cn cellml:units="dimensionless"> 1.0 </cn>
                  </apply>
                  <ci> V </ci>
                  <apply>
                    <divide/>
                    <ci> F </ci>
                    <apply>
                      <times/>
                      <ci> R </ci>
                      <ci> T </ci>
                    </apply>
                  </apply>
                </apply>
              </apply>
              <apply>
                <power/>
                <ci> Nao </ci>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
              <ci> Cai </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
  </component>
  
  <component cmeta:id="calcium_fluxes_in_the_SR" name="calcium_fluxes_in_the_SR">
    <variable name="i_rel" public_interface="out" units="mM_per_ms"/>
    <variable name="i_up" public_interface="out" units="mM_per_ms"/>
    <variable name="i_leak" public_interface="out" units="mM_per_ms"/>  
    <variable name="i_tr" public_interface="out" units="mM_per_ms"/>
                            
    <variable name="G_rel" units="per_ms"/>
    <variable name="G_rel_peak" units="per_ms"/>
    <variable initial_value="60.0" name="G_rel_max" units="per_ms"/>
    <variable initial_value="2.0" name="tau_on" units="ms"/>
    <variable initial_value="2.0" name="tau_off" units="ms"/>
    <variable initial_value="0.0" name="t_CICR" units="ms"/>
    <variable initial_value="180.0" name="tau_tr" units="ms"/>
    <variable initial_value="0.8e-3" name="K_mrel" units="mM"/>
    <variable initial_value="0.92e-3" name="K_mup" units="mM"/>
    <variable name="K_leak" units="per_ms"/>
    <variable initial_value="0.005" name="I_up" units="mM_per_ms"/>
    <variable initial_value="15.0" name="Ca_NSR_max" units="mM"/>
    
    <variable initial_value="0.0" name="delta_Ca_i2" units="mM"/>
    <variable initial_value="0.18e-3" name="delta_Ca_ith" units="mM"/>
    
    <variable name="time" public_interface="in" units="ms"/> 
    <variable name="Cai" public_interface="in" units="mM"/>
    <variable name="Ca_JSR" public_interface="in" units="mM"/>
    <variable name="Ca_NSR" public_interface="in" units="mM"/>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_rel_calculation">
        <eq/>
        <ci> i_rel </ci>
        <apply>
          <times/>
          <ci> G_rel </ci>
          <apply>
            <minus/>
            <ci> Ca_JSR </ci>
            <ci> Cai </ci>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="G_rel_calculation">
        <eq/>
        <ci> G_rel </ci>
        <apply>
          <times/>
          <ci> G_rel_peak </ci>
          <apply>
            <divide/>
            <apply>
              <minus/>
              <ci> delta_Ca_i2 </ci>
              <ci> delta_Ca_ith </ci>
            </apply>
            <apply>
              <minus/>
              <apply>
                <plus/>
                <ci> K_mrel </ci>
                <ci> delta_Ca_i2 </ci>
              </apply>
              <ci> delta_Ca_ith </ci>
            </apply>
          </apply>
          <apply>
            <minus/>
            <cn cellml:units="dimensionless"> 1.0 </cn>
            <apply>
              <exp/>
              <apply>
                <minus/>
                <apply>
                  <divide/>
                  <ci> t_CICR </ci>
                  <ci> tau_on </ci>
                </apply>
              </apply>
            </apply>
          </apply>
          <apply>
            <exp/>
            <apply>
              <minus/>
              <apply>
                <divide/>
                <ci> t_CICR </ci>
                <ci> tau_off </ci>
              </apply>     
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="G_rel_peak_calculation">
        <eq/>
        <ci> G_rel_peak </ci>
        <piecewise>
          <piece>
            <cn cellml:units="per_ms"> 0.0 </cn>
            <apply>
              <lt/>
              <ci> delta_Ca_i2 </ci>
              <ci> delta_Ca_ith </ci>
            </apply>
          </piece>
          <otherwise>
            <ci> G_rel_max </ci>
          </otherwise>
        </piecewise>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_up_calculation">
        <eq/>
        <ci> i_up </ci>
        <apply>
          <times/>
          <ci> I_up </ci>
          <apply>
            <divide/>
            <ci> Cai </ci>
            <apply>
              <plus/>
              <ci> Cai </ci>
              <ci> K_mup </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_leak_calcualtion">
        <eq/>
        <ci> i_leak </ci>
        <apply>
          <times/>
          <ci> K_leak </ci>
          <ci> Ca_NSR </ci>
        </apply>
      </apply>
    </math>
      
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="K_leak_calculation">
        <eq/>
        <ci> K_leak </ci>
        <apply>
          <divide/>
          <ci> I_up </ci>
          <ci> Ca_NSR_max </ci>
        </apply>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="i_tr_calculation">
        <eq/>
        <ci> i_tr </ci>
        <apply>
          <divide/>
          <apply>
            <minus/>
            <ci> Ca_NSR </ci>
            <ci> Ca_JSR </ci>
          </apply>
          <ci> tau_tr </ci>
        </apply>
      </apply>
    </math>
  </component>
  
   <component cmeta:id="ionic_concentrations" name="ionic_concentrations">
    <variable initial_value="10.0" name="Nai" public_interface="out" units="mM" cmeta:id="cytosolic_sodium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#cytosolic_sodium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#cytosolic_sodium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
    </variable>
    <variable initial_value="140.0" name="Nao" public_interface="out" units="mM" cmeta:id="extracellular_sodium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#extracellular_sodium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#extracellular_sodium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
    </variable>
     <variable initial_value="0.12e-3" name="Cai" public_interface="out" units="mM">
    <variable initial_value="1.8" name="Cao" public_interface="out" units="mM" cmeta:id="extracellular_calcium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#extracellular_calcium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#extracellular_calcium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
    </variable>
    <variable initial_value="145.0" name="Ki" public_interface="out" units="mM" cmeta:id="cytosolic_potassium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#cytosolic_potassium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#cytosolic_potassium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
    </variable>
    <variable initial_value="5.4" name="Ko" public_interface="out" units="mM" cmeta:id="extracellular_potassium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#extracellular_potassium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#extracellular_potassium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
    </variable>
     <variable initial_value="1.8" name="Ca_JSR" public_interface="out" units="mM" cmeta:id="JSR_calcium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#JSR_calcium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#JSR_calcium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
     </variable>
     <variable initial_value="1.8" name="Ca_NSR" public_interface="out" units="mM" cmeta:id="NSR_calcium_concentration">
       <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#NSR_calcium_concentration">
           <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#NSR_calcium_concentration"/>
         </rdf:Description>
       </rdf:RDF>
     </variable>
    
    <variable initial_value="200" name="Am" units="per_mm"/>
    <variable initial_value="0.68" name="V_myo" units="dimensionless"/>
    <variable initial_value="0.0048" name="V_JSR" units="dimensionless"/>
    <variable initial_value="0.0552" name="V_NSR" units="dimensionless"/>
    
    <variable name="time" public_interface="in" units="ms"/>
    <variable name="F" public_interface="in" units="faradays_constant_units"/>
    <variable name="i_Na" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_CaNa" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Na_b" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_ns_Na" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_NaCa" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_NaK" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_CaCa" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_CaK" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_p_Ca" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Ca_b" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_K" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_K1" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_Kp" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_ns_K" public_interface="in" units="uA_per_mm2"/>
    <variable name="i_tr" public_interface="in" units="mM_per_ms"/>
    <variable name="i_rel" public_interface="in" units="mM_per_ms"/>
    <variable name="i_leak" public_interface="in" units="mM_per_ms"/>   
    <variable name="i_up" public_interface="in" units="mM_per_ms"/>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="sodium_diff_eq">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> Nai </ci>
        </apply>
        <apply>
          <times/>
          <apply>
            <minus/>
            <apply>
              <plus/>
              <ci> i_Na </ci>
              <ci> i_CaNa </ci>
              <ci> i_Na_b </ci>
              <ci> i_ns_Na </ci>
              <apply>
                <times/>
                <ci> i_NaCa </ci>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
              <apply>
                <times/>
                <ci> i_NaK </ci>
                <cn cellml:units="dimensionless"> 3.0 </cn>
              </apply>
            </apply>
          </apply>
          <apply>
            <divide/>
            <ci> Am </ci>
            <apply>
              <times/>
              <ci> V_myo </ci>
              <ci> F </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
     
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="calcium_internal_diff_eq">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> Cai </ci>
        </apply>
        <apply>
          <plus/>
          <apply>
            <times/>
            <apply>
              <minus/>
              <apply>
                <minus/>
                <apply>
                  <plus/>
                  <ci> i_CaCa </ci>
                  <ci> i_p_Ca </ci>
                  <ci> i_Ca_b </ci>
                </apply>
                <ci> i_NaCa </ci>
              </apply>
            </apply>
            <apply>
              <divide/>
              <ci> Am </ci>
              <apply>
                <times/>
                <cn cellml:units="dimensionless"> 2.0 </cn>
                <ci> V_myo </ci>
                <ci> F </ci>
              </apply>
            </apply>
          </apply>
          <apply>
            <times/>
            <ci> i_rel </ci>
            <apply>
              <divide/>
              <ci> V_JSR </ci>
              <ci> V_myo </ci>
            </apply>
          </apply>
          <apply>
            <times/>
            <apply>
              <minus/>
              <ci> i_leak </ci>
              <ci> i_up </ci>
            </apply>
            <apply>
              <divide/>
              <ci> V_NSR </ci>
              <ci> V_myo </ci>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="potassium_internal_diff_eq">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> Ki </ci>
        </apply>
        <apply>
          <times/>
          <apply>
            <minus/>
            <apply>
              <plus/>
              <ci> i_CaK </ci>
              <ci> i_K </ci>
              <ci> i_K1 </ci>
              <ci> i_Kp </ci>
              <ci> i_ns_K </ci>
              <apply>
                <minus/>
                <apply>
                  <times/>
                  <ci> i_NaK </ci>
                  <cn cellml:units="dimensionless"> 2.0 </cn>
                </apply>
              </apply>
            </apply>
          </apply>
          <apply>
            <divide/>
            <ci> Am </ci>
            <apply>
              <times/>
              <ci> V_myo </ci>
              <ci> F </ci>
            </apply>
          </apply>
        </apply>        
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="calcium_JSR_diff_eq">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> Ca_JSR </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <minus/>
            <ci> i_rel </ci>
            <apply>
              <times/>
              <ci> i_tr </ci>
              <apply>
                <divide/>
                <ci> V_NSR </ci>
                <ci> V_JSR </ci>
              </apply>
            </apply>
          </apply>
        </apply>
      </apply>
    </math>
    
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <apply id="calcium_NSR_diff_eq">
        <eq/>
        <apply>
          <diff/>
          <bvar>
            <ci> time </ci>
          </bvar>
          <ci> Ca_NSR </ci>
        </apply>
        <apply>
          <minus/>
          <apply>
            <minus/>
            <apply>
              <plus/>
              <ci> i_leak </ci>
              <ci> i_tr </ci>
            </apply>
            <ci> i_up </ci>
          </apply>
        </apply>
      </apply>
    </math>
  </component> 
  
  <group>
    <relationship_ref relationship="encapsulation"/>
    <component_ref component="fast_sodium_current">
      <component_ref component="fast_sodium_current_m_gate"/>
      <component_ref component="fast_sodium_current_h_gate"/>
      <component_ref component="fast_sodium_current_j_gate"/>
    </component_ref>
    <component_ref component="L_type_Ca_channel">
      <component_ref component="L_type_Ca_channel_d_gate"/>
      <component_ref component="L_type_Ca_channel_f_gate"/>
      <component_ref component="L_type_Ca_channel_f_Ca_gate"/>
    </component_ref>
    <component_ref component="time_dependent_potassium_current">
      <component_ref component="time_dependent_potassium_current_X_gate"/>
      <component_ref component="time_dependent_potassium_current_Xi_gate"/>
    </component_ref>
    <component_ref component="time_independent_potassium_current">
      <component_ref component="time_independent_potassium_current_K1_gate"/>
    </component_ref>
  </group>
  
  <connection>
    <map_components component_1="membrane" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>


  <connection>
    <map_components component_1="fast_sodium_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>


  <connection>
    <map_components component_1="L_type_Ca_channel" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_dependent_potassium_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_independent_potassium_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
   

  <connection>
    <map_components component_1="Na_Ca_exchanger" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="plateau_potassium_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="sarcolemmal_calcium_pump" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="sodium_background_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="calcium_background_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="sodium_potassium_pump" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="non_specific_calcium_activated_current" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  
  <connection>
    <map_components component_1="ionic_concentrations" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
    
  <connection>
    <map_components component_1="calcium_fluxes_in_the_SR" component_2="environment"/>
    <map_variables variable_1="time" variable_2="time"/>
  </connection>
  
  <connection>
    <map_components component_1="membrane" component_2="fast_sodium_current"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_Na" variable_2="i_Na"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>


  <connection>
    <map_components component_1="membrane" component_2="L_type_Ca_channel"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_Ca_L" variable_2="i_Ca_L"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="time_dependent_potassium_current"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_K" variable_2="i_K"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="Na_Ca_exchanger"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_NaCa" variable_2="i_NaCa"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
 
  
  <connection>
    <map_components component_1="membrane" component_2="time_independent_potassium_current"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_K1" variable_2="i_K1"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="plateau_potassium_current"/>
    <map_variables variable_1="V" variable_2="V"/>
     <map_variables variable_1="i_Kp" variable_2="i_Kp"/>
  </connection>


  <connection>
    <map_components component_1="membrane" component_2="sarcolemmal_calcium_pump"/>
    <map_variables variable_1="i_p_Ca" variable_2="i_p_Ca"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="sodium_background_current"/>
    <map_variables variable_1="V" variable_2="V"/>
     <map_variables variable_1="i_Na_b" variable_2="i_Na_b"/>
  </connection>


  <connection>
    <map_components component_1="membrane" component_2="calcium_background_current"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_Ca_b" variable_2="i_Ca_b"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="sodium_potassium_pump"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="i_NaK" variable_2="i_NaK"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="non_specific_calcium_activated_current"/>
    <map_variables variable_1="V" variable_2="V"/>
    <map_variables variable_1="R" variable_2="R"/>
    <map_variables variable_1="T" variable_2="T"/>
    <map_variables variable_1="F" variable_2="F"/>
    <map_variables variable_1="i_ns_Ca" variable_2="i_ns_Ca"/>
  </connection>
  
  
  <connection>
    <map_components component_1="membrane" component_2="ionic_concentrations"/>
    <map_variables variable_1="F" variable_2="F"/>
  </connection>
  
  <connection>
    <map_components component_1="fast_sodium_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="i_Na" variable_2="i_Na"/>
    <map_variables variable_1="Nao" variable_2="Nao"/>
    <map_variables variable_1="Nai" variable_2="Nai"/>
  </connection>
  
  
  <connection>
    <map_components component_1="fast_sodium_current" component_2="sodium_background_current"/>
    <map_variables variable_1="E_Na" variable_2="E_Na"/>
  </connection>
  
  
  <connection>
    <map_components component_1="L_type_Ca_channel" component_2="ionic_concentrations"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
    <map_variables variable_1="Cao" variable_2="Cao"/>
    <map_variables variable_1="Nao" variable_2="Nao"/>
    <map_variables variable_1="Nai" variable_2="Nai"/>
    <map_variables variable_1="Ko" variable_2="Ko"/>
    <map_variables variable_1="Ki" variable_2="Ki"/>
    <map_variables variable_1="i_CaCa" variable_2="i_CaCa"/>
    <map_variables variable_1="i_CaNa" variable_2="i_CaNa"/>
    <map_variables variable_1="i_CaK" variable_2="i_CaK"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_dependent_potassium_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="Ki" variable_2="Ki"/>
    <map_variables variable_1="Ko" variable_2="Ko"/>
    <map_variables variable_1="Nao" variable_2="Nao"/>
    <map_variables variable_1="Nai" variable_2="Nai"/>
    <map_variables variable_1="i_K" variable_2="i_K"/>
  </connection>
  
  
  <connection>
    <map_components component_1="Na_Ca_exchanger" component_2="ionic_concentrations"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
    <map_variables variable_1="Nai" variable_2="Nai"/>
    <map_variables variable_1="Cao" variable_2="Cao"/>
    <map_variables variable_1="Nao" variable_2="Nao"/>
    <map_variables variable_1="i_NaCa" variable_2="i_NaCa"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_independent_potassium_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="Ki" variable_2="Ki"/>
    <map_variables variable_1="Ko" variable_2="Ko"/>
    <map_variables variable_1="i_K1" variable_2="i_K1"/>
  </connection>
  
  
  <connection>
    <map_components component_1="plateau_potassium_current" component_2="time_independent_potassium_current"/>
    <map_variables variable_1="E_K1" variable_2="E_K1"/>
  </connection>
  
  
  <connection>
    <map_components component_1="plateau_potassium_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="i_Kp" variable_2="i_Kp"/>
  </connection>
  
  
  <connection>
    <map_components component_1="sarcolemmal_calcium_pump" component_2="ionic_concentrations"/>
    <map_variables variable_1="i_p_Ca" variable_2="i_p_Ca"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
  </connection>
  
  
  <connection>
    <map_components component_1="sodium_background_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="i_Na_b" variable_2="i_Na_b"/>
  </connection>
  
  
  <connection>
    <map_components component_1="calcium_background_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
    <map_variables variable_1="Cao" variable_2="Cao"/>
    <map_variables variable_1="i_Ca_b" variable_2="i_Ca_b"/>
  </connection>
  
  
  <connection>
    <map_components component_1="sodium_potassium_pump" component_2="ionic_concentrations"/>
    <map_variables variable_1="Nai" variable_2="Nai"/>
    <map_variables variable_1="Nao" variable_2="Nao"/>
    <map_variables variable_1="Ko" variable_2="Ko"/>
    <map_variables variable_1="i_NaK" variable_2="i_NaK"/>
  </connection>
  
  
  <connection>
    <map_components component_1="non_specific_calcium_activated_current" component_2="ionic_concentrations"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
    <map_variables variable_1="Cao" variable_2="Cao"/>
    <map_variables variable_1="Nao" variable_2="Nao"/>
    <map_variables variable_1="Nai" variable_2="Nai"/>
    <map_variables variable_1="Ko" variable_2="Ko"/>
    <map_variables variable_1="Ki" variable_2="Ki"/>
    <map_variables variable_1="i_ns_Na" variable_2="i_ns_Na"/>
    <map_variables variable_1="i_ns_K" variable_2="i_ns_K"/>
  </connection>
  
  
  <connection>
    <map_components component_1="calcium_fluxes_in_the_SR" component_2="ionic_concentrations"/>
    <map_variables variable_1="i_rel" variable_2="i_rel"/>
    <map_variables variable_1="i_tr" variable_2="i_tr"/>
    <map_variables variable_1="i_leak" variable_2="i_leak"/>
    <map_variables variable_1="i_up" variable_2="i_up"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
    <map_variables variable_1="Ca_JSR" variable_2="Ca_JSR"/>
    <map_variables variable_1="Ca_NSR" variable_2="Ca_NSR"/>
  </connection>
  
  
  <connection>
    <map_components component_1="L_type_Ca_channel" component_2="non_specific_calcium_activated_current"/>
    <map_variables variable_1="gamma_Nao" variable_2="gamma_Nao"/>
    <map_variables variable_1="gamma_Nai" variable_2="gamma_Nai"/>
    <map_variables variable_1="gamma_Ko" variable_2="gamma_Ko"/>
    <map_variables variable_1="gamma_Ki" variable_2="gamma_Ki"/>
  </connection>
  
  
  <connection>
    <map_components component_1="fast_sodium_current" component_2="fast_sodium_current_m_gate"/>
    <map_variables variable_1="m" variable_2="m"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>


  <connection>
    <map_components component_1="fast_sodium_current" component_2="fast_sodium_current_h_gate"/>
    <map_variables variable_1="h" variable_2="h"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="fast_sodium_current" component_2="fast_sodium_current_j_gate"/>
    <map_variables variable_1="j" variable_2="j"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="L_type_Ca_channel" component_2="L_type_Ca_channel_d_gate"/>
    <map_variables variable_1="d" variable_2="d"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="L_type_Ca_channel" component_2="L_type_Ca_channel_f_gate"/>
    <map_variables variable_1="f" variable_2="f"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="L_type_Ca_channel" component_2="L_type_Ca_channel_f_Ca_gate"/>
    <map_variables variable_1="f_Ca" variable_2="f_Ca"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="Cai" variable_2="Cai"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_dependent_potassium_current" component_2="time_dependent_potassium_current_X_gate"/>
    <map_variables variable_1="X" variable_2="X"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_dependent_potassium_current" component_2="time_dependent_potassium_current_Xi_gate"/>
    <map_variables variable_1="Xi" variable_2="Xi"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
  
  <connection>
    <map_components component_1="time_independent_potassium_current" component_2="time_independent_potassium_current_K1_gate"/>
    <map_variables variable_1="K1_infinity" variable_2="K1_infinity"/>
    <map_variables variable_1="E_K1" variable_2="E_K1"/>
    <map_variables variable_1="time" variable_2="time"/>
    <map_variables variable_1="V" variable_2="V"/>
  </connection>
  
</model>